webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n(1);var o=n(169),i=n(170),s=r(i),a=n(325),u=r(a),c=n(326),l=r(c),f=n(332),h=r(f),d=n(333),p=r(d),v=new o.EventEmitter,y=new l["default"](v),m=new p["default"]("items",v),b=new h["default"]({auth:y,store:m},v);s["default"].render(s["default"].createElement(u["default"],{controller:b}),document.getElementById("app"))},325:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=s,r=!0}},c=n(170),l=r(c),f=function(e){function t(e){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={record:this.props.record||{}}}return s(t,e),a(t,null,[{key:"contextTypes",value:{controller:c.PropTypes.object.isRequired},enumerable:!0}]),a(t,[{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.record?"update":"create";this.context.controller.dispatch("action:"+t,this.state.record)}},{key:"onChange",value:function(e,t){var n=Object.assign({},this.state.record,o({},e,t.target.value));this.setState({record:n})}},{key:"render",value:function(){return l["default"].createElement("form",{onSubmit:this.onFormSubmit.bind(this)},l["default"].createElement("input",{autofocus:!0,name:"label",type:"text",placeholder:"Label",value:this.state.record.label,onChange:this.onChange.bind(this,"label")}),l["default"].createElement("button",{type:"submit"},this.props.record?"Save":"Add"))}}]),t}(l["default"].Component);t.Form=f;var h=function(e){function t(){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,e),a(t,[{key:"onItemClick",value:function(){this.context.controller.dispatch("action:edit",this.props.index)}},{key:"onDeleteClick",value:function(){this.context.controller.dispatch("action:delete",this.props.item)}},{key:"render",value:function(){return this.props.editing?l["default"].createElement("li",{key:this.props.index},l["default"].createElement(f,{record:this.props.item}),l["default"].createElement("button",{onClick:this.onDeleteClick.bind(this)},"Delete")):l["default"].createElement("li",{key:this.props.index,className:this.props.item._status,onClick:this.onItemClick.bind(this)},this.props.item.label)}}],[{key:"contextTypes",value:{controller:c.PropTypes.object.isRequired},enumerable:!0}]),t}(l["default"].Component);t.Item=h;var d=function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.state={current:null}}return s(t,e),a(t,null,[{key:"contextTypes",value:{controller:c.PropTypes.object.isRequired},enumerable:!0}]),a(t,[{key:"componentDidMount",value:function(){var e=this;this.context.controller.on("action:edit",function(t){e.setState({current:t})}),this.context.controller.on("action:update, action:delete",function(){e.setState({current:null})})}},{key:"render",value:function(){var e=this;return l["default"].createElement("ul",null,this.props.items.map(function(t,n){return l["default"].createElement(h,{index:n,item:t,editing:n===e.state.current})}))}}]),t}(l["default"].Component);t.List=d;var p=function(e){function t(){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,e),a(t,[{key:"onChange",value:function(e){var t={server:e.target.value};this.context.controller.dispatch("action:configure",t)}},{key:"render",value:function(){return l["default"].createElement("div",{className:"preferences"},l["default"].createElement("input",{id:"toggle",type:"checkbox"}),l["default"].createElement("label",{htmlFor:"toggle"},"Preferences"),l["default"].createElement("form",null,l["default"].createElement("label",null,"Server",l["default"].createElement("input",{value:this.props.server,onChange:this.onChange.bind(this)}))))}}],[{key:"contextTypes",value:{controller:c.PropTypes.object.isRequired},enumerable:!0}]),t}(l["default"].Component);t.Preferences=p;var v=function(e){function t(e){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={busy:!1,error:"",items:[]}}return s(t,e),a(t,null,[{key:"childContextTypes",value:{controller:c.PropTypes.object},enumerable:!0}]),a(t,[{key:"getChildContext",value:function(){return{controller:this.props.controller}}},{key:"componentDidMount",value:function(){var e=this;this.props.controller.on("store:busy",function(t){e.setState({busy:t,error:""})}),this.props.controller.on("store:change",function(t){e.setState({items:t.items})}),this.props.controller.on("store:error",function(t){e.setState({error:t.message})}),this.props.controller.on("config:change",function(t){e.setState({server:t.server})}),this.props.controller.dispatch("action:start")}},{key:"onSyncClick",value:function(){this.props.controller.dispatch("action:sync")}},{key:"render",value:function(){var e=this.state.busy?"disabled":"";return l["default"].createElement("div",{className:e},l["default"].createElement("div",{className:"error"},this.state.error),l["default"].createElement(f,null),l["default"].createElement(d,{items:this.state.items}),l["default"].createElement("button",{onClick:this.onSyncClick.bind(this),disabled:e},"Sync!"),l["default"].createElement(p,{server:this.state.server}))}}]),t}(l["default"].Component);t["default"]=v},326:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(327),a=r(s),u=function(){function e(t){o(this,e),this.events=t,this.server=""}return i(e,[{key:"configure",value:function(e){this.server=e.server}},{key:"authenticate",value:function(){var e=window.location.hash=window.location.hash.slice(1)||"public-demo",t=a["default"](e+":s3cr3t"),n={Authorization:"Basic "+t},r=this.server;this.events.emit("auth:login",{user:e,headers:n,server:r})}}]),e}();t["default"]=u,e.exports=t["default"]},327:function(e,t,n){(function(t){!function(){"use strict";function n(e){var n;return n=e instanceof t?e:new t(e.toString(),"binary"),n.toString("base64")}e.exports=n}()}).call(t,n(328).Buffer)},332:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="https://kinto.dev.mozaws.net/v1",i=function(){function e(t,r){n(this,e),this.store=t.store,this.auth=t.auth,this.events=r,this.events.on("auth:login",this.onLogin.bind(this)),this.events.on("action:start",this.onStart.bind(this)),this.events.on("action:configure",this.onConfigure.bind(this)),this.events.on("action:create",this.onCreate.bind(this)),this.events.on("action:update",this.onUpdate.bind(this)),this.events.on("action:delete",this.onDelete.bind(this)),this.events.on("action:sync",this.onSync.bind(this))}return r(e,[{key:"on",value:function(e,t){var n=this,r=e.split(/\s*,\s*/);r.forEach(function(e){return n.events.on(e,t)})}},{key:"dispatch",value:function(e,t){this.events.emit(e,t)}},{key:"onStart",value:function(){var e=window.localStorage.getItem("config"),t=e?JSON.parse(e):{server:o};this.dispatch("action:configure",t)}},{key:"onConfigure",value:function(e){window.localStorage.setItem("config",JSON.stringify(e)),this.events.emit("config:change",e),this.auth.configure(e),this.auth.authenticate()}},{key:"onLogin",value:function(e){this.store.configure(e),this.store.load()}},{key:"onCreate",value:function(e){this.store.create(e)}},{key:"onUpdate",value:function(e){this.store.update(e)}},{key:"onDelete",value:function(e){this.store["delete"](e)}},{key:"onSync",value:function(){this.store.sync()}}]),e}();t["default"]=i,e.exports=t["default"]},333:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),a=r(s),u=function(){function e(t,n){o(this,e),this.state={items:[]},this.dataset=t,this.events=n,this.collection=null}return i(e,[{key:"configure",value:function(e){try{var t=new a["default"]({remote:e.server,dbPrefix:e.user,headers:e.headers});this.collection=t.collection(this.dataset)}catch(n){this.onError(n)}}},{key:"onError",value:function(e){this.events.emit("store:busy",!1),this.events.emit("store:error",e)}},{key:"onReady",value:function(){this.events.emit("store:change",this.state),this.events.emit("store:busy",!1)}},{key:"_execute",value:function(e){return this.events.emit("store:busy",!0),e.then(this.onReady.bind(this))["catch"](this.onError.bind(this))}},{key:"load",value:function(){var e=this;return this._execute(this.collection.list().then(function(t){e.state.items=t.data}))}},{key:"create",value:function(e){var t=this;return this._execute(this.collection.create(e).then(function(e){t.state.items.push(e.data)}))}},{key:"update",value:function(e){var t=this;return this._execute(this.collection.update(e).then(function(n){t.state.items=t.state.items.map(function(t){return t.id===e.id?n.data:t})}))}},{key:"delete",value:function(e){var t=this;return this._execute(this.collection["delete"](e.id).then(function(n){t.state.items=t.state.items.filter(function(t){return t.id!==e.id})}))}},{key:"sync",value:function(){this.collection.sync({strategy:a["default"].syncStrategy.SERVER_WINS}).then(this.load.bind(this))["catch"](this.onError.bind(this))}}]),e}();t["default"]=u,e.exports=t["default"]}});